

# Concepts

*  All rsa keys are stored in ~/.ssh
*  In  ~/.ssh there are your RSA keys public and private. For instance  bastion-reform		bastion-reform.pub
*  id_rsa:  this is the private key that should live in my computer.
*  id_rsa.pub : this is the public key that should be copied to the server which I wish to connect.
*  you need to have the agent running to be able to use the keys.  Always make sure that your keys have been picked by the agent.
   Use this command for that:  ssh-add -l
*  Never give to anyone your private key :)

# Remember

Every time you connect to a server a key is generated from the server.  ~/.ssh/known_hosts is the file where the server ip and its generated key are stored.  If we delete this file it get re generated by ssh after the connection. 

# Help

more info:  https://confluence.atlassian.com/bitbucket/set-up-ssh-for-git-728138079.html#SetupanSSHkey-ssh1

# Steps for user TRose1

### 0  Make sure that there is not another key in user/TRose1/.ssh
```
ls -a ~/.ssh
```

### 1 Create the key in user/TRose1/.ssh
```
ssh-keygen
```
--> File name: bastion-reform

--> phrase: kanakldnaodbaojdbao

result: ~/.ssh there are your RSA keys public and private. For instance  bastion-reform		bastion-reform.pub . private key, it has not a file extensions.

### 2 Start the agent to load the keys

a) check if the agent is running:
```
ps -e | grep [s]sh-agent
```

b) if it is not running start it.
```
ssh-agent /bin/bash
```

### 3 Load your new identity into the ssh-agent management program using the ssh-add command. Use private key, it has not a file extensions.
```
ssh-add ~/.ssh/id_rsa
````

or mac

```
ssh-add -K ~/.ssh/<private_key_file>
```
--> phrase

result : Identity added: /Users/skynet/.ssh/bastion-reform (/Users/skynet/.ssh/bastion-reform)

### 4 Use the ssh-add command to list the keys that the agent is managing.
```
 ssh-add -l
```

###  5 Copy the keys the clipboard
```
cat ~/.ssh/bastion-reform.pub
```
or in Mac

```
pbcopy < ~/.ssh/bastion-reform.pub
```
Now you can add the public key to git hub or anything.



# How to check if the key was added

You can check the key has been added with the following... it will display the key.

```
ssh-keygen -e
```
Enter file in which the key is : bastion-reform

---- BEGIN SSH2 PUBLIC KEY ----
Comment: "2048-bit RSA, converted from OpenSSH by TRose1@LASST266447"
AAAAB3NzaC1yc2EAAAABIwAAAQEAwurg7odeqZbzI6y0h452Mpa22CITYhIoxy30pMiSRa
ohPYGcfHVNUQhvUakEqygCQYTDTXtMYHCPuF8weL6yrRq9aMViRtwKwh4D7gYIV2XY9VMF
CuUVoeNyzVSzGiOmy+n06AkRl7EZe4By1Al7zH3oAHl7oW5g2uoaXnHagkgh/L48nl03bu
IXvO2zJcNamaTJf9j0kI95VQxaEbQlH7OTGRr4Itc6A7q1mSQQfrUT+KKWvTNqGtAn7Svb
Z1xBEPatFA9PZPYClzSpz9K3zXYSxKVhLlc0a1ve6RvsQc1u1pX4KhUXfwVPMnVdZ+XmcX
/XoAIHzEjY/zuSbQyWCQ==
---- END SSH2 PUBLIC KEY ----


# Problems

Note it needs to have the variable SSH_AUTH_SOCK set like that SSH_AUTH_SOCK=/tmp/ssh-agVZL13989/agent.13989;
```
export SSH_AUTH_SOCK;
```

if you evaluate that command output in your shell, the variable will be set:
```
~/.ssh eval $(ssh-agent)
```
